                           Приложение 5

                          Программа HELP


   ( Дисплей Электроника ИЭ15 или СМ7209; ОС RT-11 )
   : $ VARIABLE ;          ( переопределение с целью экономии места)
   0 $ CU           ( переменная, характеризующая положение курсора)
   : FX 13 EMIT 22811 PAD ! PAD 2+ I PAD 4 TYPE ;( фиксация курсора
                                              в нужной точке экрана)
   : RU 14 EMIT ;                     ( переход к русскому алфавиту)
   : LA 15 EMIT ;                   ( переход к латинскому алфавиту)
   : IL 7 EMIT ;                                  ( звуковой сигнал)

   ( список экранов, где хранится справочная информация)
   0 $ TS 61 , 28 , 50 , 23 , 51 , 24 , 46 , 48 , 27 , 26 , 25 ,
   : NX CU в + DUP 24 =                  ( позиционирование курсора)
        IF DROP 0
        THEN 0 MAX DUP CU ! 2/ 2 /MOD 8226 + SWAP 28 * 256 * +  FX ;
   : EX FX 0 CU ! 27 EMIT 74 EMIT ;    ( гашение экрана и установка
                                       курсора в исходное состояние)
   : HT 8233 EX RU ;
   : .OU -DUP 0=                           ( уход из программы HELP)
         IF DROP LEV 8224 EX
         THEN ;
   : GO 8226 FX            ( прием, дешифровка и исполнение  команд)
        BEGIN 0 KEY 27 =    ( начало анализа ESC-последовательности)
              IF KEY DUP 67 =
                 IF DROP 2 NX                           ( если [->])
                 ELSE DUP 68 =
                      IF DROP -2 NX                     ( если [<-])
                      ELSE DUP 65 =
                           IF DROP -4 NX                 ( если <I>)
                           ELSE DUP 66 =
                                IF DROP 4 NX             ( если <<>)
                                ELSE 81 =             ( если <HELP>)
                                     IF CU @ TS + @ .OU LOAD
                                        8226 FX       ( возвращение
                                       курсора в исходное положение)
                                     ELSE IL
                                     THEN
                                THEN
                           THEN
                      THEN
                 THEN
              ELSE IL       ( звуковой сигнал при ошибочной команде)
              THEN
        UNTIL ;

   : HELP 8224 EX RU ." ВЫБЕРИ и НАЖМИ  LA ." <HELP>:" CR
         CR RU ." УХОД                       РЕДАКТОР"
         CR    ." ОПЕРАТОРЫ УСЛОВИЯ          ЦИКЛА"
         CR    ." ОПЕРАЦИИ С ПАМЯТЬЮ         АРИФМЕТИКА"
         CR    ." СИНТАКСИС ФОРТ             УТИЛИТЫ"
         CR    ." ОПЕРАТОРЫ ФОРТ             РАБОТА СО СТЕКОМ"
         CR    ." ВОЗВРАТНЫЙ СТЕК            ВВОД/ВЫВОД"
	 4096 36 !                                  ( установка JSW)
         GO LA 16384 36 !                    ( восстановление JSW) ;



                Пример текстов справочных экранов


HT ."  Вход  в  РЕДАКТОР  осуществляется  путем  ввода с пульта номера
экрана ." CR ." и имени редактора.  Например:" LA ." 20 EDT" RU CR  ."
Перемещение курсора по экрану выполняется с помощью клавиш <ВК>" CR ."
стрелок, направленных вверх, вниз, вправо, влево, а также клавиш <0> и
<2>"  CR  ." <1> - служит для перемещения курсора на одно слово" CR ."
<4> - задает направление перемещения курсора вперед,  а <5> - назад  "
CR  ."  <6>  - забой символа,  на который указывает курсор" CR." <7> -
переход к редактированию следующего экрана" CR ." ДЧСВ <7>  переход  в
режим  выполнения команд" CR LA ." <EXIT>" RU ." = выход из редактора"
CR LA ." <WIPE>" RU ." - стиранию экрана" CR LA  ."  <N  EDT>"  RU  ."
переход к редактированию экрана " LA ." <N>" RU CR ." <4> и <5> влияют
на работу <0>,  <1>,  <2>,  <7>, <8>, <9>" CR ." стрелка вверх двойная
черта  (СВДЧ)  стирает,  строку  начиная  с  позиции," CR ." указанной
курсором.
   " KEY  DROP  HT  ."  <8>  - обеспечивает вход в режим поиска нужной
комбинации символов." CR ." но перед <8> следует нажать <двойная черта
стрелка вниз> (ДЧСВ)," CR ." Нажатие клавиши <9> - " ." стирает слово.
Для восстановления стертого слова нужно" CR ." нажать клавиши <ДЧСВ> и
<9>" CR ." Комбинация <ДЧСВ> и <СВДЧ> восстанавливает стертую строку."
CR LA ." "^W" RU ." служит для обновления текста экрана при сбоях"  CR
."  Курсор  при этом возвращается в исходное положение." CR ." Вернуть
курсор в исходное положение можно нажатием клавиш <ДЧСВ> и <5>." CR ."
<,>  и <3> служат для вырезания и вставки кусков текста." CR ." Начало
вырезаемого текста отмечается курсором и нажатием клавиши <,>;" CR  ."
конец - курсором и <3>, последняя операция удаляет отмеченный кусок из
текста." CR ." ввод вырезанного текста в  место,  указанное  курсором,
производится  нажатием  <ДЧСВ>  и  <3>"  CR LA." <^L>" RU ." переносит
текст правее курсора,  на следующую строку." CR ." <ДЧСВ> и  "  LA  ."
<^L>" RU ." осуществляет обратную операцию."
